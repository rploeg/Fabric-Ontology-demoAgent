# Entity Definition Template
# Use this template when defining new entity types

# Entity type definition
entity:
  name: "{EntityName}"
  description: "{Brief description of what this entity represents}"
  
  # Key definition - MUST be string or int
  key:
    name: "{KeyPropertyName}"
    type: string  # or: int
    description: "Unique identifier for {EntityName}"
  
  # Static properties (stored in Lakehouse)
  static_properties:
    - name: "{PropertyName}"
      type: string  # Allowed: string, int, double, boolean, datetime
      description: "{What this property represents}"
      required: true
      
    - name: "{PropertyName2}"
      type: datetime
      description: "{Description}"
      required: false
  
  # Timeseries properties (optional - stored in Eventhouse)
  timeseries_properties:
    - name: "{MetricName}"
      type: double  # Usually double or int for metrics
      unit: "{unit of measure}"
      description: "{What this metric measures}"
      
    - name: "{MetricName2}"
      type: double
      unit: "{unit}"
      description: "{Description}"

  # Data binding configuration
  bindings:
    static:
      source: lakehouse
      table: "{DimTableName or FactTableName}"
      key_column: "{KeyColumnInTable}"
      
    timeseries:  # Only if timeseries_properties exist
      source: eventhouse
      table: "{TimeseriesTableName}"
      timestamp_column: Timestamp
      key_column: "{KeyColumnInTable}"

# =============================================================================
# ENTITY TYPE NAMING RULES (from Microsoft Fabric Ontology Docs)
# =============================================================================
# 1. Length: 1–26 characters
# 2. Pattern: ^[a-zA-Z0-9][a-zA-Z0-9_-]{0,24}[a-zA-Z0-9]$
# 3. Must start and end with alphanumeric character
# 4. Can contain hyphens and underscores

# =============================================================================
# PROPERTY NAMING RULES (from Microsoft Fabric Ontology Docs)
# =============================================================================
# 1. Length: 1–26 characters
# 2. Pattern: ^[a-zA-Z0-9][a-zA-Z0-9_-]{0,24}[a-zA-Z0-9]$
# 3. ⚠️ MUST be UNIQUE across ALL entity types in the ENTIRE ontology
# 4. Must start and end with alphanumeric character
# 5. Avoid GQL reserved words (see list below)
# 6. Recommendation: Use entity prefix for uniqueness (e.g., Product_Name, Batch_Status)

# =============================================================================
# GQL RESERVED WORDS TO AVOID AS PROPERTY/ENTITY NAMES
# =============================================================================
# MATCH, RETURN, FILTER, WHERE, LET, ORDER, LIMIT, OFFSET, DISTINCT,
# GROUP, BY, ASC, DESC, AND, OR, NOT, TRUE, FALSE, NULL, IS, IN,
# STARTS, ENDS, CONTAINS, WITH, AS, NODE, EDGE, PATH, TRAIL, UNION, ALL,
# count, sum, avg, min, max, coalesce, size, labels, nodes, edges

# =============================================================================
# TYPE CONSTRAINTS (from Microsoft Fabric Graph Docs)
# =============================================================================
# KEY TYPES:      string OR int ONLY (never datetime, boolean, or double)
# PROPERTY TYPES: string, int, double, boolean, datetime
# 
# Graph Supported Data Types:
#   - Boolean (true/false)
#   - Double (64-bit floating point)
#   - Integer (64-bit signed integers)
#   - String (Unicode character strings)
#   - Zoned DateTime (timestamps with timezone)
#
# ⚠️ NEVER use 'decimal' - Fabric Graph does NOT support Decimal type (returns NULL)
# Use 'double' instead for all monetary/precision values

# =============================================================================
# Example: Product Entity
# =============================================================================
example:
  entity:
    name: Product
    description: "Manufactured product in the catalog"
    
    key:
      name: ProductId
      type: string
      description: "Unique product identifier (e.g., PRD-001)"
    
    static_properties:
      - name: Product_Name
        type: string
        description: "Display name of the product"
        required: true
        
      - name: Product_Category
        type: string
        description: "Product classification category"
        required: true
        
      - name: Product_Status
        type: string
        description: "Current status (Active, Discontinued, Pending)"
        required: true
        
      - name: Product_LaunchDate
        type: datetime
        description: "Date product was launched to market"
        required: false
    
    timeseries_properties: []  # Product has no timeseries data
    
    bindings:
      static:
        source: lakehouse
        table: DimProduct
        key_column: ProductId
