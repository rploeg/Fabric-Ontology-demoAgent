# Local test config â€” connects to localhost MQTT broker
mqtt:
  broker: "localhost"
  port: 1883
  useTls: false
  authMethod: "usernamePassword"
  username: "mqtt"
  password: "mqtt"
  clientId: "zava-simulator-test"
  keepAlive: 60
  reconnectDelaySec: 5
  qos: 1

topicPrefix: "zava/telemetry"
topicMode: "flat"   # flat for easy local testing (simpler topics to subscribe to)

simulation:
  tickIntervalSec: 1
  timeMode: "realtime"
  shifts:
    dayStart: "06:00"
    nightStart: "18:00"
  activeBatches:
    - batchId: "BTC-011"
      product: "ZavaCore Field Standard"
      sku: "ZC Field Standard"

# Only enable a few streams for quick testing
equipmentTelemetry:
  enabled: true
  topic: "zava/telemetry/equipment"
  intervalSec: 5          # faster for testing
  equipment:
    - id: "EQP-001"
      name: "Zava Redmond Innovation Center"
      energyRange: [200, 500]
      humidityRange: [35, 45]
      productionRate: 0
    - id: "EQP-002"
      name: "Zava Portland Production Campus"
      energyRange: [800, 2500]
      humidityRange: [30, 50]
      productionRate: [10000, 15000]

machineStateTelemetry:
  enabled: true
  topic: "zava/telemetry/machine-state"
  autoDiscover: false
  totalMachines: 3
  lines:
    - name: "WeaveLine-Alpha"
      machinesPerLine: 3
      equipmentIdStart: 16
  stateTransition:
    minDwellSec: 3
    maxDwellSec: 10
    probabilities:
      Running: 0.70
      Stopped: 0.10
      Blocked: 0.05
      Waiting: 0.10
      Idle: 0.05
    errorProbability: 0.02
    errorCodes: ["E101", "E202", "E303", "E404"]

processSegmentTelemetry:
  enabled: true
  topic: "zava/telemetry/process-segment"
  intervalSec: 5
  segments:
    - id: "SEG-029"
      type: "Coating"
      temperatureRange: [80, 95]
      moistureRange: [3.0, 5.0]
      cycleTimeRange: [100, 120]
  autoGenerate:
    enabled: false

productionCounterTelemetry:
  enabled: true
  topic: "zava/telemetry/production-counter"
  intervalSec: 5
  unitCountIncrementRange: [0, 25]
  fiberProducedGramRange: [0, 100]
  rejectRate: 0.02
  oeeRange: [0.75, 0.95]
  votRange: [0, 1800]
  loadingTimeBase: 20000

safetyIncidentEvents:
  enabled: true
  topic: "zava/telemetry/safety-incident"
  minIntervalSec: 8
  maxIntervalSec: 15
  cameras:
    - id: "CAM-WH-A-01"
      zone: "Weave Hall A"
      equipmentId: "EQP-005"
  incidentTypes:
    - type: "ppe_violation"
      severity: "Warning"
      weight: 0.50
      descriptions:
        - "Worker detected without safety goggles near {zone}"
    - type: "spill_detected"
      severity: "Warning"
      weight: 0.50
      descriptions:
        - "Liquid spill detected on floor near equipment in {zone}"
  confidenceRange: [0.75, 0.99]
  imageRefTemplate: "blob://safety-captures/{year}/{month}/{day}/{cameraId}_{timestamp}.jpg"

# Disable heavier streams for quick test
predictiveMaintenanceSignals:
  enabled: false
digitalTwinStateSync:
  enabled: false
materialConsumptionEvents:
  enabled: false
qualityVisionEvents:
  enabled: false
supplyChainAlerts:
  enabled: false

anomalies:
  enabled: false

logging:
  level: "INFO"
  format: "text"
  publishMetrics: true
  metricsIntervalSec: 15
